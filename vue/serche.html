<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="css/tailwindcss.css" />

</head>

<body>
  <!-- Nav-bar -->
  <nav class="bg-green-600 block w-screen flex items-center justify-between flex-grow space-x-10 px-4 py-5 lg:p-5">
    <!-- Dorp -->
    <div class="relative">
      <div>
      <a href="http://127.0.0.1:7000/catogery">  <button id="menu-dwn"
          class="flex items-center space-x-2 lg:space-x-5 text-xl lg:text-3xl text-gray-100 lg:p-5 block hover:bg-green-700 duration-300">
          Category
        </button> </a>
      </div>
    </div>
    <!-- home -->
    <div
      class="flex items-center space-x-2 lg:space-x-5 text-xl lg:text-3xl text-gray-100 lg:p-5 block hover:bg-green-700 duration-300">
      <svg class="w-5 h-5 lg:w-10 lg:h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
        </path>
      </svg>
      <a href="http://127.0.0.1:7000/book">Home</a>
    </div>
    <!-- login -->
    <div
      class="text-xl lg:text-3xl text-gray-100 lg:p-5 block hover:bg-green-700 duration-300 flex items-center lg:mx-2 space-x-2 lg:space-x-5">
      <svg class="w-5 h-5 lg:w-10 lg:h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
      </svg>
      <button href="#" onclick="deletjwt()"> Logout</button>
    </div>
    <div class=" bg-gray-200">
      <div class="container  flex justify-center items-center">
        <div class="relative">
          <div class="absolute top-4 left-3"> <i class="fa fa-search text-gray-400 z-20 hover:text-gray-500"></i> </div>
          <input type="text" class="h-14 w-96 pl-10 pr-20 rounded-lg z-0 focus:shadow focus:outline-none"
            placeholder="Search anything..." id="search">
          <div class="absolute top-2 right-2"> <button
              class="h-10 w-20 text-white rounded-lg bg-green-600 hover:bg-green-200"  onclick="ser()">Search</button> </div>
        </div>
      </div>
    </div>
  </nav>
  <div class="my-5">
    <button
      class="bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded"
      id="Book " onclick="inFunction(this)">Book</button>
    <button
      class="bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded"
      id="auther" onclick="inFunction(this)">auther</button>
    <button
      class="bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded"
      id="year" onclick="inFunction(this)">year</button>
    <button
      class="bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded"
      id="ispn" onclick="inFunction(this)">ispn</button>
  </div>
  <div class=" space-y-2  p-2 lg:p-10 " id="book">
    <!-- Card -->







    <!-- Body-end -->
  </div>



  <script>
    function inFunction(ele) {
      const queryString = window.location.search;
      console.log(queryString);
      const urlParams = new URLSearchParams(queryString);
      const currentTarget = urlParams.get('myVar1');
      var btnValue = ele.innerText;
      console.log(btnValue);
      switch (btnValue) {
        case "Book":
          book = document.getElementById("book")
          book.innerHTML = ""

          // var bookReservationarry =[]
          console.log(currentTarget)
          fetch(`http://127.0.0.1:7000/search/${currentTarget}`)
            .then(response => response.json())
            .then((post) => {
              console.log(post)
              // console.log(post.resrvation)
              // for (let i = 0; i < post.resrvation.length; i++) {
              // console.log(post.resrvation[i].book_name)
              // bookReservationarry.push(post.resrvation[i].book_name)
              // }
              // console.log(bookReservationarry)
              for (let i = 0; i < post.Book.length; i++) {
                console.log(post.Book[i])
                var take = ""

                // if (  bookReservationarry.includes(post.booik[i].book_name)) {
                //          take= "the book is takine"
                //     }
                book.innerHTML += `
  <div>
  <div class="bg-gray-300 flex">
    <img src='${post.Book[i].book_image}' class="w-40 h-40 lg:w-2/12 h-auto" alt="book-cover" />
    <div class="flex justify-center items-start flex-col">
      <h1 class="text-xl lg:text-3xl px-5 py-3 font-bold">
      ${post.Book[i].book_name}
      
      </h1>
      <p class="hidden lg:flex lg:px-5 py-3 lg:text-2xl">
      ${post.Book[i].book_description}
      </p>
      <button
        class="bg-green-600 lg:text-3xl px-9 py-2 lg:px-7 lg:py-5 lg:pb-5 ml-5 hover:bg-green-500 duration-200 text-white">
     <a href = "http://127.0.0.1:7000/bookdetale?myVar1=${post.Book[i].book_id}" >  Reed More <a>
      </button>
      <p> ${take} </p>
      </div>
  </div>
</div>
      `
              }
            });
          break;
        case "auther":
          book = document.getElementById("book")
          book.innerHTML = ""
          // var bookReservationarry =[]
          console.log(currentTarget)
          fetch(`http://127.0.0.1:7000/search/${currentTarget}`)
            .then(response => response.json())
            .then((post) => {
              console.log(post)
              // console.log(post.resrvation)
              // for (let i = 0; i < post.resrvation.length; i++) {
              // console.log(post.resrvation[i].book_name)
              // bookReservationarry.push(post.resrvation[i].book_name)
              // }
              // console.log(bookReservationarry)
              for (let i = 0; i < post.Author.length; i++) {
                console.log(post.Author[i])
                var take = ""

                // if (  bookReservationarry.includes(post.booik[i].book_name)) {
                //          take= "the book is takine"
                //     }
                book.innerHTML += `
  <div>
  <div class="bg-gray-300 flex">
    <img src='${post.Author[i].book_image}' class="w-40 h-40 lg:w-2/12 h-auto" alt="book-cover" />
    <div class="flex justify-center items-start flex-col">
      <h1 class="text-xl lg:text-3xl px-5 py-3 font-bold">
      ${post.Author[i].book_name}
      
      </h1>
      <p class="hidden lg:flex lg:px-5 py-3 lg:text-2xl">
      ${post.Author[i].book_description}
      </p>
      <button
        class="bg-green-600 lg:text-3xl px-9 py-2 lg:px-7 lg:py-5 lg:pb-5 ml-5 hover:bg-green-500 duration-200 text-white">
     <a href = "http://127.0.0.1:7000/bookdetale?myVar1=${post.Author[i].book_id}" >  Reed More <a>
      </button>
      <p> ${take} </p>
      </div>
  </div>
</div>
      `
              }
            });
          break;
        case "year":
        book = document.getElementById("book")
          book.innerHTML = ""
          // var bookReservationarry =[]
          console.log(currentTarget)
          fetch(`http://127.0.0.1:7000/search/${currentTarget}`)
            .then(response => response.json())
            .then((post) => {
              console.log(post)
              // console.log(post.resrvation)
              // for (let i = 0; i < post.resrvation.length; i++) {
              // console.log(post.resrvation[i].book_name)
              // bookReservationarry.push(post.resrvation[i].book_name)
              // }
              // console.log(bookReservationarry)
              for (let i = 0; i < post.Year.length; i++) {
                console.log(post.Year[i])
                var take = ""

                // if (  bookReservationarry.includes(post.booik[i].book_name)) {
                //          take= "the book is takine"
                //     }
                book.innerHTML += `
  <div>
  <div class="bg-gray-300 flex">
    <img src='${post.Year[i].book_image}' class="w-40 h-40 lg:w-2/12 h-auto" alt="book-cover" />
    <div class="flex justify-center items-start flex-col">
      <h1 class="text-xl lg:text-3xl px-5 py-3 font-bold">
      ${post.Year[i].book_name}
      
      </h1>
      <p class="hidden lg:flex lg:px-5 py-3 lg:text-2xl">
      ${post.Year[i].book_description}
      </p>
      <button
        class="bg-green-600 lg:text-3xl px-9 py-2 lg:px-7 lg:py-5 lg:pb-5 ml-5 hover:bg-green-500 duration-200 text-white">
     <a href = "http://127.0.0.1:7000/bookdetale?myVar1=${post.Year[i].book_id}" >  Reed More <a>
      </button>
      <p> ${take} </p>
      </div>
  </div>
</div>
      `
              }
            });
          break;
        case "ispn":
        book = document.getElementById("book")
          book.innerHTML = ""
          // var bookReservationarry =[]
          console.log(currentTarget)
          fetch(`http://127.0.0.1:7000/search/${currentTarget}`)
            .then(response => response.json())
            .then((post) => {
              console.log(post)
              // console.log(post.resrvation)
              // for (let i = 0; i < post.resrvation.length; i++) {
              // console.log(post.resrvation[i].book_name)
              // bookReservationarry.push(post.resrvation[i].book_name)
              // }
              // console.log(bookReservationarry)
              for (let i = 0; i < post.Author.length; i++) {
                console.log(post.isbn[i])
                var take = ""

                // if (  bookReservationarry.includes(post.booik[i].book_name)) {
                //          take= "the book is takine"
                //     }
                book.innerHTML += `
  <div>
  <div class="bg-gray-300 flex">
    <img src='${post.isbn[i].book_image}' class="w-40 h-40 lg:w-2/12 h-auto" alt="book-cover" />
    <div class="flex justify-center items-start flex-col">
      <h1 class="text-xl lg:text-3xl px-5 py-3 font-bold">
      ${post.isbn[i].book_name}
      
      </h1>
      <p class="hidden lg:flex lg:px-5 py-3 lg:text-2xl">
      ${post.isbn[i].book_description}
      </p>
      <button
        class="bg-green-600 lg:text-3xl px-9 py-2 lg:px-7 lg:py-5 lg:pb-5 ml-5 hover:bg-green-500 duration-200 text-white">
     <a href = "http://127.0.0.1:7000/bookdetale?myVar1=${post.isbn[i].book_id}" >  Reed More <a>
      </button>
      <p> ${take} </p>
      </div>
  </div>
</div>
      `
              }
            });
          break;
        default:
          break;
      }
    }
    var docCookies = {
				getItem: function (sKey) {
					return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*" + encodeURIComponent(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*([^;]*).*$)|^.*$"), "$1")) || null;
				},
				setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {
					if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)) { return false; }
					var sExpires = "";
					if (vEnd) {
						switch (vEnd.constructor) {
							case Number:
								sExpires = vEnd === Infinity ? "; expires=Fri, 31 Dec 9999 23:59:59 GMT" : "; max-age=" + vEnd;
								break;
							case String:
								sExpires = "; expires=" + vEnd;
								break;
							case Date:
								sExpires = "; expires=" + vEnd.toUTCString();
								break;
						}
					}
					document.cookie = encodeURIComponent(sKey) + "=" + encodeURIComponent(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");
					return true;
				},
				removeItem: function (sKey, sPath, sDomain) {
					if (!sKey || !this.hasItem(sKey)) { return false; }
					document.cookie = encodeURIComponent(sKey) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT" + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "");
					return true;
				},
				hasItem: function (sKey) {
					return (new RegExp("(?:^|;\\s*)" + encodeURIComponent(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie);
				},
				keys: /* optional method: you can safely remove it! */ function () {
					var aKeys = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, "").split(/\s*(?:\=[^;]*)?;\s*/);
					for (var nIdx = 0; nIdx < aKeys.length; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }
					return aKeys;
				}
			};


    function ser(){
  var values1 =  document.getElementById("search").value
   console.log(values1)
   window.location.replace(`http://127.0.0.1:7000/searche?myVar1=${values1}`);

}
function deletjwt() {
			docCookies.removeItem("tooken")
			window.location.replace("http://127.0.0.1:7000/");

		}
  </script>

</body>

</html>